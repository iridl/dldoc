<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:wms="http://www.opengis.net/wms#"
      xmlns:iridl="http://iridl.ldeo.columbia.edu/ontologies/iridl.owl#"
      xmlns:maproom="http://iridl.ldeo.columbia.edu/ontologies/maproom.owl#"
      xmlns:term="http://iridl.ldeo.columbia.edu/ontologies/iriterms.owl#"
      xmlns:gaz="http://iridl.ldeo.columbia.edu/ontologies/irigaz.owl#"
      xmlns:rdfs="http://www.w3.org/2000/01/rdf-schema#"
      xmlns:xs="http://www.w3.org/2001/XMLSchema#"
      version="XHTML+RDFa 1.0"
 xml:lang="en"
      >
<head>
 <meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Faceted Browser</title>
<link rel="stylesheet" type="text/css" href="/uicore/uicore.css" />
<link rel="canonical" href="facetedbrowser.html" />
<link class="carryLanguage" rel="home" href="http://iri.columbia.edu/" title="IRI" />
<link class="carryLanguage" rel="home alternate" type="application/json" href="/localconfig/navmenu.json" />
<link rel="shortcut icon" href="/uicore/icons/iri32.png" />
<link rel="apple-touch-icon" sizes="54x54" href="/uicore/icons/iriwh.png" />
<link rel="icon" href="../uicore/icons/iriwh.svg" sizes="any" type="image/svg+xml" />
<link rel="term:isDescribedBy" href="http://iridl.ldeo.columbia.edu/ontologies/iridl.owl#climate" />
<script type="text/javascript" src="/uicore/uicore.js"></script>
<style>
body[loading]::after {
content: attr(loading);
display: block;
border: 4pt;
border-style: outset;
border-color; DarkGrey;
text-align: center;
padding: 20pt;
position: fixed;
opacity: 0.6;
font-size: 20pt;
top: 35%;
left: 40%;
right: 40%;
z-index: 100;
background-color: WhiteSmoke;
background: url('/uicore/icons/wait30.gif') center no-repeat transparent;
background-size: 80px;
border-radius: 10px;
}
.nonChoice,.Choice,.implies {
margin-left: 15pt;
}
input[rdftype="term:spanningSemantic"] + .lbl {
font-weight: bold
}
input[rdftype="term:spanningSemantic"] {
opacity: 0.3;
}
[rdftype="term:Facet"] {
font-weight: bold;
font-size: 120%;
}
.facetTemplate {
border: 1pt;
border-style: outset;
width: 95%;
padding: 5pt;
border-radius: 15px;
}
.facet {
-webkit-column-break-inside: avoid;
break-inside: avoid;
border: 1pt;
border-style: inset;
border-radius: 10px;
padding: 5pt;
background-color: WhiteSmoke;
}
.facet + .facet {
margin-top: 4pt;
}
@media only all and (min-width: 800px) {
.facetTemplate {
-webkit-column-count: 2;
column-count: 2;
-moz-column-count: 2;
}
}
</style>
</head>
<body  xml:lang="en">
<form name="pageform" id="pageform">
<input class="carryLanguage" name="Set-Language" type="hidden" />
<input class="searchState titleLink share bodyAttribute" name="taxa" type="hidden" value=""/>
<input class="searchState titleLink share bodyAttribute" name="itemClass" type="hidden" value=""/>
<input class="searchState titleLink share bodyAttribute" name="sem" type="hidden" value=""/>
<input class="searchState titleLink share bodyAttribute" name="sem" type="hidden" value=""/>
<input class="searchState titleLink share bodyAttribute" name="sem" type="hidden" value=""/>
<input class="searchState titleLink share bodyAttribute" name="sem" type="hidden" value=""/>
<input class="searchState titleLink share bodyAttribute" name="sem" type="hidden" value=""/>
</form>
<script id="stateContext" type="application/ld-json" property="iridl:hasJsonldContext">
{
"@context": {
"iridl": "http://iridl.ldeo.columbia.edu/ontologies/iridl.owl#",
"term": "http://iridl.ldeo.columbia.edu/ontologies/iriterms.owl#",
"rdfs": "http://www.w3.org/2000/01/rdf-schema#",
"Set-Language": {"@id": "iridl:Set-Language"},
"taxa": {"@id": "term:Taxa", "@type": "@id"},
"itemClass": {"@id": "term:itemClass", "@type": "@id"},
"sem": {"@id": "term:Semantic", "@type": "@id"}
}
}
</script>
<a rel="iridl:hasSparqlEndpoint" href="/openrdf-sesame/repositories/owlim-lite-maproom-pie"></a>
<script data-id="taxa" type="application/serql" property="iridl:hasSerqlQuery">
CONSTRUCT {taxa} rdfs:label {tlabel} ;rdf:type {term:Taxa}
FROM {object} term:isDescribedBy {semantic} rdf:type {taxa} rdf:type {term:Taxa},
{object} rdf:type {objectClass},
[ {objectClass} rdfs:label {clabel} ],
[ {taxa} rdfs:label {tlabel} ]
WHERE isuri(objectClass)
USING NAMESPACE
     term = &lt;http://iridl.ldeo.columbia.edu/ontologies/iriterms.owl#>,
    iridl = &lt;http://iridl.ldeo.columbia.edu/ontologies/iridl.owl#>
</script>
<script type="application/ld-json" property="iridl:hasJsonldFrame">
{
"@type": "term:Taxa",
"@context": {
"term": "http://iridl.ldeo.columbia.edu/ontologies/iriterms.owl#",
"iridl": "http://iridl.ldeo.columbia.edu/ontologies/iridl.owl#",
"rdfs": "http://www.w3.org/2000/01/rdf-schema#",
"id": "@id",
"graph": "@graph",
"value": "@value",
"language": "@language",
"rdfs:label": { "@language": "en" }
}
}
</script>
<script data-id="itemClasses" type="application/serql" property="iridl:hasSerqlQuery">
CONSTRUCT {objectClass} rdfs:label {clabel} ; rdf:type {term:ItemClass}
FROM {object} term:isDescribedBy {semantic} rdf:type {taxa} rdf:type {term:Taxa},
{object} rdf:type {objectClass} rdfs:subClassOf {term:SearchItem},
[ {objectClass} rdfs:label {clabel} ],
[ {taxa} rdfs:label {tlabel} ]
WHERE isuri(objectClass)
USING NAMESPACE
     term = &lt;http://iridl.ldeo.columbia.edu/ontologies/iriterms.owl#>,
    iridl = &lt;http://iridl.ldeo.columbia.edu/ontologies/iridl.owl#>
</script>
<script type="application/ld-json" property="iridl:hasJsonldFrame">
{
"@type": "term:ItemClass",
"@context": {
"term": "http://iridl.ldeo.columbia.edu/ontologies/iriterms.owl#",
"iridl": "http://iridl.ldeo.columbia.edu/ontologies/iridl.owl#",
"rdfs": "http://www.w3.org/2000/01/rdf-schema#",
"id": "@id",
"graph": "@graph",
"value": "@value",
"language": "@language",
"rdfs:label": { "@language": "en" }
}
}
</script>
<script class="taxaTemplate" type="application/json" property="iridl:hasPUREdirective">
{
"option": {
"tax &lt;- taxa.graph": {
".": "tax.rdfs:label",
"@value": "tax.id"
}
}
}
</script>
<script class="itemClassTemplate" type="application/json" property="iridl:hasPUREdirective">
{
"option.current": {
"theitem &lt;- itemClasses.graph": {
".": "theitem.rdfs:label",
"@value": "theitem.id"
}
}
}
</script>
<script data-id="lang" type="application/serql" property="iridl:hasSerqlQuery">
SELECT DISTINCT lang(title)
FROM {object} term:title {title} 
WHERE NOT lang(title)=""
USING NAMESPACE
     term = &lt;http://iridl.ldeo.columbia.edu/ontologies/iriterms.owl#>,
    iridl = &lt;http://iridl.ldeo.columbia.edu/ontologies/iridl.owl#>
</script>
<script class="langTemplate" type="application/json" property="iridl:hasPUREdirective">
{
"option.opt": {
"thelang &lt;- lang.results.bindings": {
".": "thelang._1.value",
"@value": "thelang._1.value"
}
}
}
</script>
<script data-id="choiceSemantics" data-if="body[itemClass][taxa][sem]" type="application/serql" class="searchState" property="iridl:hasSerqlQuery">
CONSTRUCT REDUCED {facet} rdf:type {term:Facet} ; rdfs:label {flabel}; term:hasChoice {semantic} rdfs:label {slabel}
    FROM 
{semantic} rdf:type {facet} rdf:type {term:Facet}; rdfs:subClassOf {taxa},
{item} term:isDescribedBy {sem}; term:isDescribedBy {semantic}; rdf:type {itemClass},
[ {semantic} rdfs:label {slabel} ],
[ {facet} rdfs:label {flabel} ],
[{semantic} term:implies {better} rdf:type {facet}]
WHERE NOT EXISTS 
(select better FROM {semantic} term:implies {better} rdf:type {facet} WHERE NOT EXISTS (SELECT another FROM {better} term:implies {semantic} ; term:implies {another}))
UNION
CONSTRUCT 
{semantic} rdfs:label {slabel} ; rdf:type {term:spanningSemantic},
{semantic} term:isImpliedBy {subsemantic}
rdfs:label {sblabel} 
FROM 
{semantic} rdf:type {facet} rdf:type {term:Facet}; rdfs:subClassOf{taxa},
{semantic} rdfs:label {slabel},
[{subsemantic} term:implies {semantic} ; rdf:type {facet} ; rdfs:label {sblabel} WHERE 
subsemantic IN (SELECT semanti FROM
{object} rdf:type {itemClass} ; term:isDescribedBy {sem}; term:isDescribedBy {semanti} rdf:type {taxa}
) AND
NOT EXISTS 
(select better FROM {subsemantic} term:implies {better} term:implies {semantic}WHERE NOT EXISTS (SELECT another FROM {better} term:implies {subsemantic} ; term:implies {another}))
]
WHERE semantic IN (SELECT semanti FROM
{object} rdf:type {itemClass} ; term:isDescribedBy {sem}; term:isDescribedBy {semanti} rdf:type {taxa}
)
AND  NOT EXISTS (
SELECT anitem FROM  
{anitem} rdf:type {itemClass} ; term:isDescribedBy {sem},
[{anitem} iridc:hasPart{subitem}]
WHERE subitem=NULL
AND NOT EXISTS (SELECT * FROM {anitem} term:isDescribedBy {semantic})
)
USING NAMESPACE
     term = &lt;http://iridl.ldeo.columbia.edu/ontologies/iriterms.owl#>,
    iridl = &lt;http://iridl.ldeo.columbia.edu/ontologies/iridl.owl#>,
    iridc = &lt;http://iridl.ldeo.columbia.edu/ontologies/iridc.owl#>
</script>
<script type="application/ld-json" property="iridl:hasJsonldFrame">
{
"@type": "term:Facet",
"@context": {
"term": "http://iridl.ldeo.columbia.edu/ontologies/iriterms.owl#",
"iridl": "http://iridl.ldeo.columbia.edu/ontologies/iridl.owl#",
"rdfs": "http://www.w3.org/2000/01/rdf-schema#",
"id": "@id",
"graph": "@graph",
"value": "@value",
"language": "@language",
"type": "@type",
"rdfs:label": { "@language": "en" },
"term:hasNonChoice": {"@container": "@set"},
"term:hasChoice": {"@container": "@set"},
"term:isImpliedBy": {"@container": "@set"},
"term:hasNone": {"@container": "@set"}
}
}
</script>
<script class="facetTemplate" type="application/json" property="iridl:hasPUREdirective">
{
"div.facet": {
"facet &lt;- choiceSemantics.graph": {
".lbl": "facet.rdfs:label",
".lbl@rdftype": "facet.type",
".Choice": {
"choice &lt;- facet.term:hasChoice": {
".lbl": "choice.rdfs:label",
"input@rdftype": "choice.type",
"input@value": "choice.id",
".implies": {
"implies &lt;- choice.term:isImpliedBy": {
".lbl": "implies.rdfs:label",
"input@rdftype": "implies.type",
"input@value":"implies.id"
}
}
}
}
}
}
}
</script>
<script data-id="choiceSemantics" data-if="body[itemClass][taxa]" data-notif="body[sem]" type="application/serql" class="searchState" property="iridl:hasSerqlQuery">
CONSTRUCT REDUCED {facet} rdf:type {term:Facet} ; rdfs:label {flabel}; term:hasChoice {semantic} rdfs:label {slabel}
    FROM 
{semantic} rdf:type {facet} rdf:type {term:Facet}; rdfs:subClassOf {taxa},
{item} term:isDescribedBy {semantic}; rdf:type {itemClass},
[ {semantic} rdfs:label {slabel} ],
[ {facet} rdfs:label {flabel} ],
[{semantic} term:implies {better} rdf:type {facet}]
WHERE NOT EXISTS 
(select better FROM {semantic} term:implies {better} rdf:type {facet} WHERE NOT EXISTS (SELECT better FROM {better} term:implies {semantic}))
UNION
CONSTRUCT 
{semantic} rdfs:label {slabel} ; rdf:type {term:spanningSemantic},
{semantic} term:isImpliedBy {subsemantic} rdfs:label {sblabel} 
FROM 
{semantic} rdf:type {facet} rdf:type {term:Facet}; rdfs:subClassOf{taxa},
{semantic} rdfs:label {slabel},
[{subsemantic} term:implies {semantic} ; rdf:type {facet} ; rdfs:label {sblabel} WHERE 
subsemantic IN (SELECT semanti FROM
{object} rdf:type {itemClass}; term:isDescribedBy {semanti} rdf:type {taxa})
AND NOT EXISTS 
(select better FROM {subsemantic} term:implies {better} term:implies {semantic}WHERE NOT EXISTS (SELECT better FROM {better} term:implies {subsemantic}))
]
WHERE semantic IN (SELECT semanti FROM
{object} rdf:type {itemClass} ; term:isDescribedBy {semanti} rdf:type {taxa})
AND  NOT EXISTS (
SELECT anitem FROM  
{anitem} rdf:type {itemClass},
[{anitem} iridc:hasPart{subitem}]
WHERE subitem=NULL
AND NOT EXISTS (SELECT anitem FROM {anitem} term:isDescribedBy {semantic})
)
USING NAMESPACE
     term = &lt;http://iridl.ldeo.columbia.edu/ontologies/iriterms.owl#>,
    iridl = &lt;http://iridl.ldeo.columbia.edu/ontologies/iridl.owl#>,
    iridc = &lt;http://iridl.ldeo.columbia.edu/ontologies/iridc.owl#>
</script>
<script type="application/ld-json" property="iridl:hasJsonldFrame">
{
"@type": "term:Facet",
"@context": {
"term": "http://iridl.ldeo.columbia.edu/ontologies/iriterms.owl#",
"iridl": "http://iridl.ldeo.columbia.edu/ontologies/iridl.owl#",
"rdfs": "http://www.w3.org/2000/01/rdf-schema#",
"id": "@id",
"graph": "@graph",
"value": "@value",
"language": "@language",
"type": "@type",
"rdfs:label": { "@language": "en" },
"term:hasNonChoice": {"@container": "@set"},
"term:hasChoice": {"@container": "@set"},
"term:isImpliedBy": {"@container": "@set"},
"term:hasNone": {"@container": "@set"}
}
}
</script>
<script data-id="Items" data-if="body[itemClass][taxa]" type="application/serql" class="searchState" property="iridl:hasSerqlQuery">
CONSTRUCT DISTINCT  {item} term:title {title} ; term:description {description}; term:icon {icon}, {item} term:isDescribedBy {semantic}
    FROM 
{itemml} xhtml:canonical {item} ;  rdf:type {itemClass} ; term:isDescribedBy {sem} rdf:type {taxa},{itemml} term:isDescribedBy {semantic} rdf:type {taxa},
[{item} term:title {title}],
[{item} term:description {description}],
[{item} term:icon {icon}],
[{item} iridc:hasPart {part }rdf:type {itemClass} ; term:isDescribedBy {sem} rdf:type {taxa}],
[{item} dcterm:isReplacedBy {newitem }rdf:type {itemClass} ; term:isDescribedBy {sem} rdf:type {taxa}]
WHERE part=NULL and newitem=NULL
USING NAMESPACE
     term = &lt;http://iridl.ldeo.columbia.edu/ontologies/iriterms.owl#>,
    iridl = &lt;http://iridl.ldeo.columbia.edu/ontologies/iridl.owl#>,
    iridc = &lt;http://iridl.ldeo.columbia.edu/ontologies/iridc.owl#>,
    xhtml = &lt;http://www.w3.org/1999/xhtml/vocab#>,
    dcterm = &lt;http://purl.org/dc/terms/>
</script>
<script type="application/ld-json" property="iridl:hasJsonldFrame">
{
"term:isDescribedBy": {},
"@context": {
"term": "http://iridl.ldeo.columbia.edu/ontologies/iriterms.owl#",
"iridl": "http://iridl.ldeo.columbia.edu/ontologies/iridl.owl#",
"rdfs": "http://www.w3.org/2000/01/rdf-schema#",
"xhtml": "http://www.w3.org/1999/xhtml/vocab#",
"maproom": "http://iridl.ldeo.columbia.edu/ontologies/maproom.owl#",
"gaz": "http://iridl.ldeo.columbia.edu/ontologies/irigaz.owl#",
"id": "@id",
"graph": "@graph",
"value": "@value",
"language": "@language",
"type": "@type",
"rdfs:label": { "@language": "en" },
"term:title": { "@language": "en" },
"term:description": { "@language": "en" },
"term:icon": { "@type": "@id" },
"term:hasNonChoice": {"@container": "@set"},
"term:hasChoice": {"@container": "@set"},
"term:isImpliedBy": {"@container": "@set"},
"term:isDescribedBy": {"container": "@set","@type": "@id"}
}
}
</script>
<script class="itemTemplate" type="application/json" property="iridl:hasPUREdirective">
{
"div.item": {
"itm &lt;- Items.graph": {
".itemTitle a": "itm.term:title",
".itemDescription": "itm.term:description",
".titleLink@href": "itm.id",
".itemImage@src": "itm.term:icon"
}
}
}
</script>
<div class="controlBar">
           <fieldset class="navitem">
                <legend>Help</legend> 
                      <a rev="section" class="navlink carryup" href="/dochelp/UIcore/">UI Core</a>
            </fieldset> 
           <fieldset class="navitem"> 
                <legend>UI Core</legend> 
                     <span class="navtext">Faceted Browser</span>
            </fieldset> 
           <fieldset class="navitem"> 
                <legend>Taxa</legend> 
<span class="taxaTemplate">
<select name="taxa" class="pageformcopy containsAllValids">
  <option class="current"></option>
</select>
</span>
            </fieldset> 
           <fieldset class="navitem"> 
                <legend>Items</legend> 
<span class="itemClassTemplate">
<select name="itemClass" class="pageformcopy containsAllValids">
  <option class="current"></option>
</select>
</span>
            </fieldset> 
           <fieldset class="navitem"> 
                <legend>Lang</legend> 
<span class="langTemplate">
<select name="Set-Language" class="pageformcopy containsAllValids">
  <option></option>
  <option class="opt"></option>
</select>
</span>
            </fieldset> 
 </div>
<div class="searchDescription">
<h2 property="term:title">Faceted Browser</h2>
<p property="term:description">uses isDescribedBy relationships to create a faceted browse</p>
<div class="valid">
  <div class="facetTemplate">
    <div class="facet">
      <span class="lbl "></span>
      <div class="Choice">
	<input class="pageformcopy searchState" name="sem" type="checkbox"/><span class="lbl "></span>
	<div class="implies"><input class="pageformcopy searchState" name="sem" type="checkbox"/><span class="lbl "></span></div>
      </div>
</div>
</div>
</div>
</div>
<div class="rightcol">
<div class="ui-tabs">
<ul class="ui-tabs-nav">
<li> <a HREF="#menu">Maproom Pages</a></li>
<li> <a HREF="#query">Query</a></li>
<li> <a HREF="#formcontext">Form Context</a></li>
<li> <a HREF="#frame">Frame</a></li>
<li> <a HREF="#jsonldtext">JSON-LD</a></li>
</ul>
<div id="menu" class="ui-tabs-panel valid">
<div class="itemTemplate">
                  <div class="item">
                     <div class="itemTitle"><a class="carryLanguage carry titleLink"></a></div>
                     <div class="itemIcon"><a class="carryLanguage carry titleLink"><img class="itemImage" /></a></div>
                     <div class="itemDescription"></div>
                     <div class="itemFooter"></div>
                  </div>
</div>
</div>
</div>
</div>
<div class="optionsBar">
<fieldset class="navitem" id="share"><legend>Share</legend></fieldset>
</div>
</body>
</html>



