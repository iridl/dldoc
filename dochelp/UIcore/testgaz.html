<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://iridl.ldeo.columbia.edu/ontologies/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:wms="http://www.opengis.net/wms#"
      xmlns:iridl="http://iridl.ldeo.columbia.edu/ontologies/iridl.owl#"
      xmlns:maproom="http://iridl.ldeo.columbia.edu/ontologies/maproom.owl#"
      xmlns:term="http://iridl.ldeo.columbia.edu/ontologies/iriterms.owl#"
      xmlns:gaz="http://iridl.ldeo.columbia.edu/ontologies/irigaz.owl#"
      xmlns:rdfs="http://www.w3.org/2000/01/rdf-schema#"
      xmlns:xs="http://www.w3.org/2001/XMLSchema#"
      version="XHTML+RDFa 1.0"
 xml:lang="en"
      >
<head>
 <meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Sparql Endpoint interface</title>
<link rel="stylesheet" type="text/css" href="/uicore/uicore.css" />
<link rel="canonical" href="index.html" />
<link class="carryLanguage" rel="home" href="http://iri.columbia.edu/" title="IRI" />
<link class="carryLanguage" rel="home alternate" type="application/json" href="/localconfig/navmenu.json" />
<link rel="shortcut icon" href="/uicore/icons/iri32.png" />
<link rel="apple-touch-icon" sizes="54x54" href="/uicore/icons/iriwh.png" />
<link rel="icon" href="../uicore/icons/iriwh.svg" sizes="any" type="image/svg+xml" />
<link rel="term:isDescribedBy" href="http://iridl.ldeo.columbia.edu/ontologies/iridl.owl#climate" />
<script type="text/javascript" src="/uicore/uicore.js"></script>
<script type="text/javascript" src="/jsonld/jsonld.js"></script>
</head>
<body>
<form name="pageform" id="pageform">
<input class="carryLanguage" name="Set-Language" type="hidden" />
<input class="titleLink itemImage regionQuery share" name="bbox" type="hidden" value="gaz:Caribbean_310_0"/>
</form>
<div class="controlBar">
           <fieldset class="navitem">
                <legend>IRI/LDEO</legend> 
                      <a rev="section" class="navlink carryup" href="/">Climate Data Library</a>
            </fieldset> 
           <fieldset class="navitem"> 
                <legend>Data Library</legend> 
                     <span class="navtext"></span>
            </fieldset> 
           <fieldset class="navitem"> 
                <legend>Region</legend> 
            </fieldset> 
 </div>
<div class="searchDescription">
<h2 property="term:title">Sample Gaz Menu</h2>
<p property="term:description">just a test</p>
</div>
<div>
<a rel="iridl:hasSparqlEndpoint" href="/openrdf-sesame/repositories/owlim-lite-gaz"></a>
<script id="regions" type="application/serql" class="regionQuery" property="iridl:hasSerqlQuery">
CONSTRUCT {bbox}  frwk:contains {entity} rdfs:label {elabel}
FROM 
{entity} frwk:partOf {bbox} ; rdfs:label {elabel}
UNION
CONSTRUCT {bbox} rdf:type {frwk:currentPlace}; rdfs:label {blabel}
FROM
{bbox} rdfs:label {blabel}
UNION
CONSTRUCT {bbox} frwk:partOf {pbox} rdfs:label {pplabel}
FROM
{bbox} frwk:partOf {pbox} rdfs:label {pplabel}
USING NAMESPACE
gaz= &lt;http://iridl.ldeo.columbia.edu/ontologies/irigaz.owl#>,
rdfs=&lt;http://www.w3.org/2000/01/rdf-schema#>,
frwk= &lt;http://iridl.ldeo.columbia.edu/ontologies/irigaz_frwk.owl#>
</script>
<script type="application/ld-json" property="iridl:hasJsonldFrame">
{
"@type": "gazfw:currentPlace",
"@context": {
"gaz": "http://iridl.ldeo.columbia.edu/ontologies/irigaz.owl#",
"gazfw": "http://iridl.ldeo.columbia.edu/ontologies/irigaz_frwk.owl#",
"rdfs": "http://www.w3.org/2000/01/rdf-schema#",
"id": "@id",
"graph": "@graph",
"gazfw:contains": {"@container": "@set"},
"gazfw:partOf": {"@container": "@set"}
}
}
</script>
<script class="regionTemplate" type="application/json" property="iridl:hasPUREdirective">
{
    "select": {
	"region &lt;- regions.graph": {
	    "option.current": "region.rdfs:label",
	    "option.current@value": "region.id",
	    "optgroup.subregion@label": "region.rdfs:label",
	    "option.sub": {
		"opt &lt;- region.gazfw:contains": {
		    "@value": "opt.id",
		    ".": "opt.rdfs:label"
		}
	    },
	    "option.parent": {
		"popt &lt;- region.gazfw:partOf": {
		    "@value": "popt.id",
		    ".": "popt.rdfs:label"
		}
	    }
	}
    }
}
</script>
<span class="regionTemplate">
<select name="bbox" class="pageformcopy">
  <option class="current"></option>
  <optgroup label="belongs to">
    <option class="parent"></option>
  </optgroup>
  <optgroup class="subregion" label="Region">
    <option class="sub"></option>
  </optgroup>
</select>
</span>
<div property="iridl:QueryAsText">This gets replaced</div>
<div property="iridl:JsonAsText">This gets replaced</div>
</div>
<div class="optionsBar">
<fieldset class="navitem" id="share"><legend>Share</legend></fieldset>
</div>
</body>
</html>



